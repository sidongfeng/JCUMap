import os
import sys
import copy
import xmltodict
import json

""" Read file """
f = open("data/outputs.txt", "r")
line = f.readline()
line = eval(line)
SubjectCode = line["SubjectCode"]
SubjectName = line["SubjectName"]
SubjectCoordinator = line["SubjectCoordinator"]
SubjectDescription = line["SubjectDescription"]
CreditPoints = line["CreditPoints"]
StudyYear = line["StudyYear"]
TeachingPeriod = line["TeachingPeriod"]
SLOCount = line["SLOCount"]
MappingClassList = eval(line["MappingClassList"].replace("false","False").replace("true","True"))
PieceOfAssessmentList = eval(line["PieceOfAssessmentList"])
f.close()

""" Generate XML """
ChildCompetencies1 = {'Prefix': '1.', 'DescriptionText': 'KNOWLEDGE AND SKILL BASE', 'ChildCompetencies': [{'Prefix': '1.1', 'DescriptionText': '[b]Comprehensive, theory based understanding[/b] of the underpinning natural and physical sciences and the engineering fundamentals applicable to the engineering discipline.', 'ChildCompetencies': {'Prefix': 'a)', 'DescriptionText': '[b]Engages[/b] with the engineering discipline at a phenomenological level, applying sciences and engineering fundamentals to systematic investigation, interpretation, analysis and innovative solution of complex problems and broader aspects of engineering practice.', 'IsTicked': 'true', 'DL': '2'}, 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '1.2', 'DescriptionText': '[b]Conceptual understanding[/b] of the, mathematics, numerical analysis, statistics, and computer and information sciences which underpin the engineering discipline.', 'ChildCompetencies': {'Prefix': 'a)', 'DescriptionText': '[b]Develops and fluently applies[/b] relevant investigation analysis, interpretation, assessment, characterisation, prediction, evaluation, modelling, decision making, measurement, evaluation, knowledge management and communication tools and techniques pertinent to the engineering discipline.', 'IsTicked': 'true', 'DL': '2'}, 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '1.3', 'DescriptionText': '[b]In depth understanding[/b] of specialist bodies of knowledge within the engineering discipline.', 'ChildCompetencies': {'Prefix': 'a)', 'DescriptionText': '[b]Proficiently applies[/b] advanced technical knowledge and skills in at least one specialist practice domain of the engineering discipline.', 'IsTicked': 'false', 'DL': '3'}, 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '1.4', 'DescriptionText': '[b]Discernment[/b] of knowledge development and research directions within the engineering discipline.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Identifies and critically appraises[/b] current developments, advanced technologies, emerging issues and interdisciplinary linkages in at least one specialist practice domain of the engineering discipline.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Interprets and applies[/b] selected research literature to inform engineering application in at least one specialist domain of the engineering discipline.', 'IsTicked': 'false', 'DL': '2'}], 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '1.5', 'DescriptionText': '[b]Knowledge[/b] of contextual factors impacting the engineering discipline.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Identifies and understands[/b] the interactions between engineering systems and people in the social, cultural, environmental, commercial, legal and political contexts in which they operate, including both the positive role of engineering in sustainable development and the potentially adverse impacts of engineering activity in the engineering discipline.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'b)', 'DescriptionText': '[b]Is aware of[/b] the founding principles of human factors relevant to the engineering discipline.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'c)', 'DescriptionText': '[b]Is aware of[/b] the fundamentals of business and enterprise management.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'd)', 'DescriptionText': '[b]Identifies[/b] the structure, roles and capabilities of the engineering workforce.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'e)', 'DescriptionText': '[b]Appreciates[/b] the issues associated with international engineering practice and global operating contexts.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '1.6', 'DescriptionText': '[b]Understanding[/b] of the scope, principles, norms, accountabilities and bounds of contemporary engineering practice in the engineering discipline.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Applies[/b] systematic principles of engineering design relevant to the engineering discipline.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Appreciates[/b] the basis and relevance of standards and codes of practice, as well as legislative and statutory requirements applicable to the engineering discipline.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'c)', 'DescriptionText': '[b]Appreciates[/b] the principles of safety engineering, risk management and the health and safety responsibilities of the professional engineer, including legislative requirements applicable to the engineering discipline.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'd)', 'DescriptionText': '[b]Appreciates[/b] the social, environmental and economic principles of sustainable engineering practice.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'e)', 'DescriptionText': '[b]Understands[/b] the fundamental principles of engineering project management as a basis for planning, organising and managing resources.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'f)', 'DescriptionText': '[b]Appreciates[/b] the formal structures and methodologies of systems engineering as a holistic basis for managing complexity and sustainability in engineering practice.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}
ChildCompetencies2 = {'Prefix': '2.', 'DescriptionText': 'ENGINEERING APPLICATION ABILITY', 'ChildCompetencies': [{'Prefix': '2.1', 'DescriptionText': '[b]Application[/b] of established engineering methods to complex engineering problem solving.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Identifies, discerns and characterises[/b] salient issues, [b]determines and analyses[/b] causes and effects, [b]justifies and applies[/b] appropriate simplifying assumptions, [b]predicts[/b] performance and behaviour, [b]synthesises[/b] solution strategies and [b]develops[/b] substantiated conclusions.', 'IsTicked': 'false', 'DL': '3'}, {'Prefix': 'b)', 'DescriptionText': '[b]Ensures[/b] that all aspects of an engineering activity are soundly based on fundamental principles - by diagnosing, and taking appropriate action with data, calculations, results, proposals, processes, practices, and documented information that may be ill-founded, illogical, erroneous, unreliable or unrealistic.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'c)', 'DescriptionText': '[b]Competently addresses[/b] engineering problems involving uncertainty, ambiguity, imprecise information and wide-ranging and sometimes conflicting technical and non-technical factors.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'd)', 'DescriptionText': '[b]Partitions[/b] problems, processes or systems into manageable elements for the purposes of analysis, modelling or design and then [b]re-combines[/b] to form a whole, with the integrity and performance of the overall system as the paramount consideration.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'e)', 'DescriptionText': '[b]Conceptualises[/b] alternative engineering approaches and [b]evaluates[/b] potential outcomes against appropriate criteria to justify an optimal solution choice.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'f)', 'DescriptionText': '[b]Critically reviews and applies[/b] relevant standards and codes of practice underpinning the engineering discipline and nominated specialisations.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'g)', 'DescriptionText': '[b]Identifies, quantifies, mitigates and manages[/b] technical, health, environmental, safety and other contextual risks associated with engineering application in the designated engineering discipline.', 'IsTicked': 'false', 'DL': '3'}, {'Prefix': 'h)', 'DescriptionText': '[b]Interprets and ensures[/b] compliance with relevant legislative and statutory requirements applicable to the engineering discipline.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'i)', 'DescriptionText': '[b]Investigates[/b] complex problems using research-based knowledge and research methods.', 'IsTicked': 'true', 'DL': '2'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '2.2', 'DescriptionText': '[b]Fluent application[/b] of engineering techniques, tools and resources.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Proficiently identifies, selects and applies[/b] the materials, components, devices, systems, processes, resources, plant and equipment relevant to the engineering discipline.', 'IsTicked': 'false', 'DL': '3'}, {'Prefix': 'b)', 'DescriptionText': '[b]Constructs or selects and applies[/b] from a qualitative description of a phenomenon, process, system, component or device a mathematical, physical or computational model based on fundamental scientific principles and justifiable simplifying assumptions.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'c)', 'DescriptionText': '[b]Determines[/b] properties, performance, safe working limits, failure modes, and other inherent parameters of materials, components and systems relevant to the engineering discipline.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'd)', 'DescriptionText': '[b]Applies[/b] a wide range of engineering tools for analysis, simulation, visualisation, synthesis and design, including assessing the accuracy and limitations of such tools, and validation of their results.', 'IsTicked': 'false', 'DL': '3'}, {'Prefix': 'e)', 'DescriptionText': '[b]Applies[/b] formal systems engineering methods to address the planning and execution of complex, problem solving and engineering projects.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'f)', 'DescriptionText': '[b]Designs and conducts[/b] experiments, [b]analyses and interprets[/b] result data and [b]formulates[/b] reliable conclusions.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'g)', 'DescriptionText': '[b]Analyses[/b] sources of error in applied models and experiments; [b]eliminates, minimises or compensates[/b] for such errors; [b]quantifies[/b] significance of errors to any conclusions drawn.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'h)', 'DescriptionText': '[b]Safely applies[/b] laboratory, test and experimental procedures appropriate to the engineering discipline.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'i)', 'DescriptionText': '[b]Understands[/b] the need for systematic management of the acquisition, commissioning, operation, upgrade, monitoring and maintenance of engineering plant, facilities, equipment and systems.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'j)', 'DescriptionText': '[b]Understands[/b] the role of quality management systems, tools and processes within a culture of continuous improvement.', 'IsTicked': 'true', 'DL': '3'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '2.3', 'DescriptionText': '[b]Application[/b] of systematic engineering synthesis and design processes.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Proficiently applies[/b] technical knowledge and open ended problem solving skills as well as appropriate tools and resources to design components, elements, systems, plant, facilities and/or processes to satisfy user requirements.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'b)', 'DescriptionText': '[b]Addresses[/b] broad contextual constraints such as social, cultural, environmental, commercial, legal political and human factors, as well as health, safety and sustainability imperatives as an integral part of the design process.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'c)', 'DescriptionText': '[b]Executes and leads[/b] a whole systems design cycle approach including tasks such as: \\r\\n- determining client requirements and identifying the impact of relevant contextual factors, including business planning and costing targets; \\r\\n- systematically addressing sustainability criteria; \\r\\n- working within projected development, production and implementation constraints; \\r\\n- eliciting, scoping and documenting the required outcomes of the design task and defining acceptance criteria; \\r\\n- identifying assessing and managing technical, health and safety risks integral to the design process; \\r\\n- writing engineering specifications, that fully satisfy the formal requirements; \\r\\n- ensuring compliance with essential engineering standards and codes of practice; \\r\\n- partitioning the design task into appropriate modular, functional elements; that can be separately addressed and subsequently integrated through defined interfaces; \\r\\n- identifying and analysing possible design approaches and justifying an optimal approach; \\r\\n- developing and completing the design using appropriate engineering principles, tools, and processes; \\r\\n- integrating functional elements to form a coherent design solution; \\r\\n- quantifying the materials, components, systems, equipment, facilities, engineering resources and operating arrangements needed for implementation of the solution; \\r\\n- checking the design solution for each element and the integrated system against the engineering specifications; \\r\\n- devising and documenting tests that will verify performance of the elements and the integrated realisation; \\r\\n- prototyping/implementing the design solution and verifying performance against specification; \\r\\n- documenting, commissioning and reporting the design outcome.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'd)', 'DescriptionText': '[b]Is aware of[/b] the accountabilities of the professional engineer in relation to the ‘design authority’ role.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '2.4', 'DescriptionText': '[b]Application[/b] of systematic approaches to the conduct and management of engineering projects.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Contributes to and/or manages[/b] [i]complex[/i] engineering project activity, as a member and/or as leader of an engineering team.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Seeks out[/b] the requirements and associated resources and [b]realistically assesses[/b] the scope, dimensions, scale of effort and indicative costs of a [i]complex[/i] engineering project.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'c)', 'DescriptionText': '[b]Accommodates[/b] relevant contextual issues into all phases of engineering project work, including the fundamentals of business planning and financial management.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'd)', 'DescriptionText': '[b]Proficiently applies[/b] basic systems engineering and/or project management tools and processes to the planning and execution of project work, targeting the delivery of a significant outcome to a professional standard.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'e)', 'DescriptionText': '[b]Is aware of[/b] the need to plan and quantify performance over the full life-cycle of a project, managing engineering performance within the overall implementation context.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'f)', 'DescriptionText': '[b]Demonstrates[/b] commitment to sustainable engineering practices and the achievement of sustainable outcomes in all facets of engineering project work.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}
ChildCompetencies3 = {'Prefix': '3.', 'DescriptionText': 'PROFESSIONAL AND PERSONAL ATTRIBUTES', 'ChildCompetencies': [{'Prefix': '3.1', 'DescriptionText': 'Ethical conduct and professional accountability.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Demonstrates[/b] commitment to uphold the Engineers Australia - Code of Ethics, and established norms of professional conduct pertinent to the engineering discipline.', 'IsTicked': 'true', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Understands[/b] the need for ‘due-diligence’ in certification, compliance and risk management processes.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'c)', 'DescriptionText': '[b]Understands[/b] the accountabilities of the professional engineer and the broader engineering team for the safety of other people and for protection of the environment.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'd)', 'DescriptionText': '[b]Is aware of[/b] the fundamental principles of intellectual property rights and protection.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '3.2', 'DescriptionText': 'Effective oral and written communication in professional and lay domains.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Is proficient in[/b] listening, speaking, reading and writing English, including: \\r\\n- comprehending critically and fairly the viewpoints of others; \\r\\n- expressing information effectively and succinctly, issuing instruction, engaging in discussion, presenting arguments and justification, debating and negotiating - to technical and non-technical audiences and using textual, diagrammatic, pictorial and graphical media best suited to the context; \\r\\n- representing an engineering position, or the engineering profession at large to the broader community; \\r\\n- appreciating the impact of body language, personal behaviour and other non-verbal communication processes, as well as the fundamentals of human social behaviour and their cross-cultural differences.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'b)', 'DescriptionText': '[b]Prepares[/b] high quality engineering documents such as progress and project reports, reports of investigations and feasibility studies, proposals, specifications, design records, drawings, technical descriptions and presentations pertinent to the engineering discipline.', 'IsTicked': 'true', 'DL': '3'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '3.3', 'DescriptionText': 'Creative, innovative and pro-active demeanour.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Applies[/b] creative approaches to identify and develop alternative concepts, solutions and procedures, appropriately challenges engineering practices from technical and non-technical viewpoints; identifies new technological opportunities.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'b)', 'DescriptionText': '[b]Seeks out[/b] new developments in the engineering discipline and specialisations and [b]applies[/b] fundamental knowledge and systematic processes to evaluate and report potential.', 'IsTicked': 'false', 'DL': '2'}, {'Prefix': 'c)', 'DescriptionText': '[b]Is aware of[/b] broader fields of science, engineering, technology and commerce from which new ideas and interfaces may be may drawn and readily [b]engages[/b] with professionals from these fields to exchange ideas.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '3.4', 'DescriptionText': 'Professional use and management of information.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Is proficient in[/b] locating and utilising information - including accessing, systematically searching, analysing, evaluating and referencing relevant published works and data; is proficient in the use of indexes, bibliographic databases and other search facilities.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'b)', 'DescriptionText': '[b]Critically assesses[/b] the accuracy, reliability and authenticity of information.', 'IsTicked': 'true', 'DL': '3'}, {'Prefix': 'c)', 'DescriptionText': '[b]Is aware of[/b] common document identification, tracking and control procedures.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}, {'Prefix': '3.5', 'DescriptionText': 'Orderly management of self, and professional conduct.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Demonstrates[/b] commitment to critical self-review and performance evaluation against appropriate criteria as a primary means of tracking personal development needs and achievements.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Understands[/b] the importance of being a member of a professional and intellectual community, learning from its knowledge and standards, and contributing to their maintenance and advancement.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'c)', 'DescriptionText': '[b]Demonstrates[/b] commitment to life-long learning and professional development.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'd)', 'DescriptionText': '[b]Manages[/b] time and processes effectively, [b]prioritises[/b] competing demands to achieve personal, career and organisational goals and objectives.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'e)', 'DescriptionText': '[b]Thinks critically and applies[/b] an appropriate balance of logic and intellectual criteria to analysis, judgment and decision making.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'f)', 'DescriptionText': '[b]Presents[/b] a professional image in all circumstances, including relations with clients, stakeholders, as well as with professional and technical colleagues across wide ranging disciplines.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'false', 'DL': '1'}, {'Prefix': '3.6', 'DescriptionText': 'Effective team membership and team leadership.', 'ChildCompetencies': [{'Prefix': 'a)', 'DescriptionText': '[b]Understands[/b] the fundamentals of team dynamics and leadership.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'b)', 'DescriptionText': '[b]Functions as[/b] an effective member or leader of diverse engineering teams, including those with multilevel, multi-disciplinary and multi-cultural dimensions.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'c)', 'DescriptionText': '[b]Earns[/b] the trust and confidence of colleagues through competent and timely completion of tasks.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'd)', 'DescriptionText': '[b]Recognises[/b] the value of alternative and diverse viewpoints, scholarly advice and the importance of professional networking.', 'IsTicked': 'true', 'DL': '2'}, {'Prefix': 'e)', 'DescriptionText': '[b]Confidently pursues and discerns[/b] expert assistance and professional advice.', 'IsTicked': 'false', 'DL': '1'}, {'Prefix': 'f)', 'DescriptionText': '[b]Takes initiative and fulfils[/b] the leadership role whilst respecting the agreed roles of others.', 'IsTicked': 'false', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}], 'IsTicked': 'true', 'DL': '1'}
# AssessmentCatBreakdown?????
# FractionOfSubject??????
MappingClass_format = {'SubjectLearningOutcome': None, 'PrimaryMapping': {'Prefix': 'BaEng', 'DescriptionText': 'Engineers Australia Stage 1 Competency Standard', 'ChildCompetencies': [], 'IsTicked': 'true', 'DL': '1'}, 'FractionOfSubject': '15.9', 'AssessmentCatBreakdown': {'item': [{'key': {'int': '18'}, 'value': {'double': '1.5'}}, {'key': {'int': '15'}, 'value': {'double': '8.4'}}, {'key': {'int': '7'}, 'value': {'double': '1'}}, {'key': {'int': '0'}, 'value': {'double': '5'}}]}}
PieceOfAssessment_format = {'PoaName': 'Assignment 1', 'PoaType': '18', 'PoaWeight': '3', 'PoaBreakdown': {'Val1': '50', 'Val2': '50', 'Val3': '0', 'Val4': '0', 'Val5': '0', 'Val6': '0', 'Val7': '0'}}


result = {'World': {'CourseIndex': '0', 'SubjectInfo': 
            {'SubjectCode': None, 'SubjectName': None, 'SubjectCoordinator': None, 'SubjectDescription': None, 'CreditPoints': None, 'StudyYear': None, 'TeachingPeriod': None},
            'SLOCount': None, 'SLOsAndMapping': {'MappingClass': []}, 'MyAssessmentMapping': {'AllAssessment': {'PieceOfAssessment': []}, 'TotalWeight': '100'}}}



# f = open("data/inputs/COMP4130.xml", "r")
# data = f.read().replace('\n', '')
# dic = json.loads(json.dumps(xmltodict.parse(data, process_namespaces=True)))
root = result["World"]
root['@xmlns:xsi'] = 'http://www.w3.org/2001/XMLSchema-instance'
root['@xmlns:xsd'] = 'http://www.w3.org/2001/XMLSchema'
root["SubjectInfo"]["SubjectCode"] = SubjectCode
root["SubjectInfo"]["SubjectName"] = SubjectName
root["SubjectInfo"]["SubjectCoordinator"] = SubjectCoordinator
root["SubjectInfo"]["SubjectDescription"] = SubjectDescription
root["SubjectInfo"]["CreditPoints"] = CreditPoints
root["SubjectInfo"]["StudyYear"] = StudyYear
root["SubjectInfo"]["TeachingPeriod"] = TeachingPeriod
root["SLOCount"] = SLOCount

# print(ChildCompetencies3['ChildCompetencies'][0]['ChildCompetencies'][0]['IsTicked'])
for m in MappingClassList:
    index = 0
    MappingClass = copy.deepcopy(MappingClass_format)
    MappingClass['SubjectLearningOutcome'] = m['SubjectLearningOutcome']
    for child in [ChildCompetencies1, ChildCompetencies2, ChildCompetencies3]:
        numbers = child['ChildCompetencies']
        IsTicked = False
        for number in numbers:
            local_IsTicked = False
            if type(number['ChildCompetencies']) != list:
                number['ChildCompetencies']['IsTicked'] = 'true' if m['IsTicked'][index] else 'false'
                number['ChildCompetencies']['DL'] = m['DL'][index]
                if m['IsTicked'][index]:
                    local_IsTicked = True
                index += 1
            else:
                for letter in number['ChildCompetencies']:
                    letter['IsTicked'] = 'true' if m['IsTicked'][index] else 'false'
                    letter['DL'] = m['DL'][index]
                    if m['IsTicked'][index]:
                        local_IsTicked = True
                    index += 1
            number['IsTicked'] = 'true' if local_IsTicked else 'false'
            if local_IsTicked:
                IsTicked = True
        child['IsTicked'] = 'true' if IsTicked else 'false'
        MappingClass['PrimaryMapping']['ChildCompetencies'].append(child)
    # print(MappingClass['PrimaryMapping']['ChildCompetencies'][2]['ChildCompetencies'][0]['ChildCompetencies'][0]['Prefix'])
    root['SLOsAndMapping']['MappingClass'].append(MappingClass)
        
for p in PieceOfAssessmentList:
    PieceOfAssessment = copy.deepcopy(PieceOfAssessment_format)
    PieceOfAssessment_format = {'PoaName': 'Assignment 1', 'PoaType': '18', 'PoaWeight': '3', 'PoaBreakdown': {'Val1': '50', 'Val2': '50', 'Val3': '0', 'Val4': '0', 'Val5': '0', 'Val6': '0', 'Val7': '0'}}
    PieceOfAssessment['PoaName'] = p['PoaName']
    PieceOfAssessment['PoaType'] = p['PoaType']
    PieceOfAssessment['PoaWeight'] = p['PoaWeight']
    for i in range(len(p['PoaBreakdown'])):
        PieceOfAssessment['PoaBreakdown']['Val'+str(i+1)] = p['PoaBreakdown'][i]
    root['MyAssessmentMapping']['AllAssessment']['PieceOfAssessment'].append(PieceOfAssessment)

xml = xmltodict.unparse(result, pretty=True)
f = open("data/outputs/{}.xml".format(SubjectCode), "w")
f.write(xml)
f.close()

# os. remove("data/outputs.txt")

print("data/outputs/{}.xml".format(SubjectCode))
sys.stdout.flush()


